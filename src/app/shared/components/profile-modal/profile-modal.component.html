<div class="modal-backdrop" (click)="onBackdropClick($event)">
  <div class="modal-container">
    <div class="modal-header">
      <h2>Edit Profile</h2>
      <button class="modal-close" (click)="onClose()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <div class="modal-body">
      <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="name">Full Name *</label>
            <input 
              type="text" 
              id="name"
              class="form-control"
              formControlName="name"
              placeholder="Enter your full name"
              [class.error]="profileForm.get('name')?.invalid && profileForm.get('name')?.touched">
            <div class="error-message" *ngIf="profileForm.get('name')?.invalid && profileForm.get('name')?.touched">
              <span *ngIf="profileForm.get('name')?.errors?.['required']">Name is required</span>
              <span *ngIf="profileForm.get('name')?.errors?.['minlength']">Name must be at least 2 characters</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="email">Email Address *</label>
            <input 
              type="email" 
              id="email"
              class="form-control"
              formControlName="email"
              placeholder="Enter your email"
              [class.error]="profileForm.get('email')?.invalid && profileForm.get('email')?.touched">
            <div class="error-message" *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched">
              <span *ngIf="profileForm.get('email')?.errors?.['required']">Email is required</span>
              <span *ngIf="profileForm.get('email')?.errors?.['email']">Please enter a valid email</span>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="age">Age *</label>
            <input 
              type="number" 
              id="age"
              class="form-control"
              formControlName="age"
              placeholder="Enter your age"
              min="18"
              max="100"
              [class.error]="profileForm.get('age')?.invalid && profileForm.get('age')?.touched">
            <div class="error-message" *ngIf="profileForm.get('age')?.invalid && profileForm.get('age')?.touched">
              <span *ngIf="profileForm.get('age')?.errors?.['required']">Age is required</span>
              <span *ngIf="profileForm.get('age')?.errors?.['min']">Age must be at least 18</span>
              <span *ngIf="profileForm.get('age')?.errors?.['max']">Age must be less than 100</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="gender">Gender *</label>
            <select 
              id="gender"
              class="form-control"
              formControlName="gender"
              [class.error]="profileForm.get('gender')?.invalid && profileForm.get('gender')?.touched">
              <option value="">Select gender</option>
              <option *ngFor="let option of genderOptions" [value]="option">{{ option }}</option>
            </select>
            <div class="error-message" *ngIf="profileForm.get('gender')?.invalid && profileForm.get('gender')?.touched">
              <span *ngIf="profileForm.get('gender')?.errors?.['required']">Gender is required</span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="contact">Contact Number *</label>
          <input 
            type="tel" 
            id="contact"
            class="form-control"
            formControlName="contact"
            placeholder="Enter your contact number"
            [class.error]="profileForm.get('contact')?.invalid && profileForm.get('contact')?.touched">
          <div class="error-message" *ngIf="profileForm.get('contact')?.invalid && profileForm.get('contact')?.touched">
            <span *ngIf="profileForm.get('contact')?.errors?.['required']">Contact number is required</span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="specialization">Specialization</label>
            <select 
              id="specialization"
              class="form-control"
              formControlName="specialization">
              <option value="">Select specialization</option>
              <option *ngFor="let option of specializationOptions" [value]="option">{{ option }}</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" for="experience">Experience</label>
            <input 
              type="text" 
              id="experience"
              class="form-control"
              formControlName="experience"
              placeholder="e.g., 5 years">
          </div>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" (click)="onClose()">
            Cancel
          </button>
          <button 
            type="submit" 
            class="btn btn-primary"
            [disabled]="profileForm.invalid || isLoading">
            <span *ngIf="isLoading" class="spinner"></span>
            <span *ngIf="!isLoading">Save Changes</span>
            <span *ngIf="isLoading">Saving...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
